(this["webpackJsonpcomm-app"]=this["webpackJsonpcomm-app"]||[]).push([[0],{65:function(e,a,t){e.exports=t(94)},70:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},90:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){},94:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(24),r=t.n(l),o=(t(70),t(13)),m=(t(71),t(72),t(108)),s=t(45),i=t.n(s),u=t(46),d=t.n(u),p=t(47),E=t.n(p),h=Object(n.createContext)(),v=function(e){var a=e.reducer,t=e.initialState,l=e.children;return c.a.createElement(h.Provider,{value:Object(n.useReducer)(a,t)},l)},f=function(){return Object(n.useContext)(h)};var g=function(){var e=f(),a=Object(o.a)(e,1)[0].user;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header__left"},c.a.createElement(m.a,{className:"header__avatar",alt:null===a||void 0===a?void 0:a.displayName,src:null===a||void 0===a?void 0:a.photoURL}),c.a.createElement(i.a,null)),c.a.createElement("div",{className:"header__search"},c.a.createElement(d.a,null),c.a.createElement("input",{placeholder:"Search"})),c.a.createElement("div",{className:"header__right"},c.a.createElement(E.a,null)))},b=(t(77),t(48)),_=t.n(b),N=t(49),I=t.n(N),O=t(50),j=t.n(O),S=t(51),w=t.n(S),y=t(52),C=t.n(y),D=t(53),k=t.n(D),A=t(54),R=t.n(A),B=t(55),U=t.n(B),W=t(56),x=t.n(W),G=t(57),L=t.n(G),P=t(58),T=t.n(P),F=t(59),M=t.n(F),z=(t(78),t(4)),V=t(26),J=t.n(V),K=J.a.initializeApp({apiKey:"AIzaSyAc400eW1ERuSwDTUO-DAhFza93Ax8fW5s",authDomain:"comm-app-1adc7.firebaseapp.com",databaseURL:"https://comm-app-1adc7.firebaseio.com",projectId:"comm-app-1adc7",storageBucket:"comm-app-1adc7.appspot.com",messagingSenderId:"981322472228",appId:"1:981322472228:web:3cee069f32a8e7f0f831b1",measurementId:"G-EV3VG203Q3"}).firestore(),Q=J.a.auth(),$=new J.a.auth.GoogleAuthProvider,q=K;var H=function(e){var a=e.Icon,t=e.title,n=e.id,l=e.addChannelOption,r=Object(z.f)();return c.a.createElement("div",{className:"sidebarOption",onClick:l?function(){var e=prompt("Please enter the channel name");e&&q.collection("rooms").add({name:e})}:function(){n?r.push("/room/".concat(n)):r.push(t)}},a&&c.a.createElement(a,{className:"sidebarOption__icon"}),a?c.a.createElement("h3",null,t):c.a.createElement("h3",{className:"sidebarOption__channel"},c.a.createElement("span",{className:"sidebarOption__hash"}," # ")," ",t))};var X=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],l=a[1],r=f(),m=Object(o.a)(r,1)[0].user;return Object(n.useEffect)((function(){q.collection("rooms").onSnapshot((function(e){return l(e.docs.map((function(e){return{id:e.id,name:e.data().name}})))}))}),[]),c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement("div",{className:"sidebar__info"},c.a.createElement("h2",null,"EMBDeveloper"),c.a.createElement("h3",null,c.a.createElement(_.a,null),null===m||void 0===m?void 0:m.displayName)),c.a.createElement(I.a,null)),c.a.createElement(H,{Icon:j.a,title:"Threads"}),c.a.createElement(H,{Icon:w.a,title:"Mentions & Reactions"}),c.a.createElement(H,{Icon:C.a,title:"Saved Items"}),c.a.createElement(H,{Icon:k.a,title:"Channel Browser"}),c.a.createElement(H,{Icon:R.a,title:"People & User Groups"}),c.a.createElement(H,{Icon:U.a,title:"Apps"}),c.a.createElement(H,{Icon:x.a,title:"File Browser"}),c.a.createElement(H,{Icon:L.a,title:"Show Less"}),c.a.createElement("hr",null),c.a.createElement(H,{Icon:T.a,title:"Channels"}),c.a.createElement("hr",null),c.a.createElement(H,{Icon:M.a,addChannelOption:!0,title:"Add Channel"}),t.map((function(e){return c.a.createElement(H,{title:e.name,id:e.id})})))},Y=(t(90),t(60)),Z=t.n(Y),ee=t(61),ae=t.n(ee);t(91);var te=function(e){var a=e.message,t=e.timestamp,n=e.user,l=e.userImage;return c.a.createElement("div",{className:"message"},c.a.createElement("img",{src:l,alt:""}),c.a.createElement("div",{className:"message__info"},c.a.createElement("h4",null," ",n,c.a.createElement("span",{className:"message__timestamp"},new Date(null===t||void 0===t?void 0:t.toDate()).toUTCString())),c.a.createElement("p",null," ",a," ")))};t(92);var ne=function(e){var a=e.channelName,t=e.channelId,l=Object(n.useState)(""),r=Object(o.a)(l,2),m=r[0],s=r[1],i=f(),u=Object(o.a)(i,1)[0].user;return c.a.createElement("div",{className:"chatInput"},c.a.createElement("form",null,c.a.createElement("input",{value:m,onChange:function(e){return s(e.target.value)},placeholder:"Message #".concat(a)}),c.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),t&&q.collection("rooms").doc(t).collection("messages").add({message:m,timestamp:J.a.firestore.FieldValue.serverTimestamp(),user:u.displayName,userImage:u.photoURL}),s("")}},"SEND")))};var ce=function(){var e=Object(z.g)().roomId,a=Object(n.useState)(null),t=Object(o.a)(a,2),l=t[0],r=t[1],m=Object(n.useState)([]),s=Object(o.a)(m,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){e&&q.collection("rooms").doc(e).onSnapshot((function(e){return r(e.data())})),q.collection("rooms").doc(e).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return u(e.docs.map((function(e){return e.data()})))}))}),[e]),c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat__header"},c.a.createElement("div",{className:"chat__headerLeft"},c.a.createElement("h4",{className:"chat__channelName"},c.a.createElement("strong",null,"#",null===l||void 0===l?void 0:l.name),c.a.createElement(Z.a,null))),c.a.createElement("div",{className:"chat__headerRight"},c.a.createElement("p",null,c.a.createElement(ae.a,null)," Details"))),c.a.createElement("div",{className:"chat__messages"},i.map((function(e){var a=e.message,t=e.timestamp,n=e.user,l=e.userImage;return c.a.createElement(te,{message:a,timestamp:t,user:n,userImage:l})}))),c.a.createElement(ne,{channelName:null===l||void 0===l?void 0:l.name,channelId:e}))},le=(t(93),t(107)),re="SET_USER",oe=function(e,a){switch(console.log(a),a.type){case re:return{state:e,user:a.user};default:return e}};var me=function(){var e=f(),a=Object(o.a)(e,2),t=(a[0],a[1]);return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__container"},c.a.createElement("img",{src:"https://i.pinimg.com/564x/50/4a/c1/504ac1008f40a9f0bc0568cac8132277.jpg",alt:""}),c.a.createElement("h1",null,"Sign in"),c.a.createElement("p",null,"embdeveloper.chatapp.com"),c.a.createElement(le.a,{onClick:function(){Q.signInWithPopup($).then((function(e){console.log(e),t({type:re,user:e.user})})).catch((function(e){alert(e.message)}))}},"Sign In with Google")))},se=t(32);var ie=function(){var e=f(),a=Object(o.a)(e,2),t=a[0].user;return a[1],c.a.createElement("div",{className:"app"},c.a.createElement(se.a,null,t?c.a.createElement(c.a.Fragment,null,c.a.createElement(g,null),c.a.createElement("div",{className:"app__body"},c.a.createElement(X,null),c.a.createElement(z.c,null,c.a.createElement(z.a,{path:"/room/:roomId"},c.a.createElement(ce,null)),c.a.createElement(z.a,{path:"/"},c.a.createElement("h1",null,"Welcome"))))):c.a.createElement(me,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(v,{initialState:{user:null},reducer:oe},c.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.b10bc0fe.chunk.js.map